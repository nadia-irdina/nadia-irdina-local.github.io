<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>nadia-irdina.github.io - Data Insights</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">nadia-irdina.github.io</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./DataStory.html" rel="" target="">
 <span class="menu-text">Data Story</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./insights.html" rel="" target="" aria-current="page">
 <span class="menu-text">Insights</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Conclusion.html" rel="" target="">
 <span class="menu-text">Conclusion</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#glimpse-of-episodes" id="toc-glimpse-of-episodes" class="nav-link active" data-scroll-target="#glimpse-of-episodes">Glimpse of Episodes</a></li>
  <li><a href="#comparing-viewership-over-time" id="toc-comparing-viewership-over-time" class="nav-link" data-scroll-target="#comparing-viewership-over-time">Comparing Viewership Over Time</a>
  <ul class="collapse">
  <li><a href="#comparing-viewership-over-time-grouped-by-season" id="toc-comparing-viewership-over-time-grouped-by-season" class="nav-link" data-scroll-target="#comparing-viewership-over-time-grouped-by-season">Comparing Viewership Over Time, grouped by Season</a></li>
  </ul></li>
  <li><a href="#who-are-the-directors-and-what-is-their-impact-to-the-show" id="toc-who-are-the-directors-and-what-is-their-impact-to-the-show" class="nav-link" data-scroll-target="#who-are-the-directors-and-what-is-their-impact-to-the-show">Who are the Directors and what is their impact to the show?</a></li>
  <li><a href="#who-are-the-writers-and-what-is-their-impact" id="toc-who-are-the-writers-and-what-is-their-impact" class="nav-link" data-scroll-target="#who-are-the-writers-and-what-is-their-impact">Who are the Writers and what is their impact?</a></li>
  <li><a href="#average-imdb-score-per-season" id="toc-average-imdb-score-per-season" class="nav-link" data-scroll-target="#average-imdb-score-per-season">Average IMDB score per Season</a></li>
  <li><a href="#other-factors-that-affect-show-popularity" id="toc-other-factors-that-affect-show-popularity" class="nav-link" data-scroll-target="#other-factors-that-affect-show-popularity">Other factors that affect show popularity</a>
  <ul class="collapse">
  <li><a href="#frequency-of-director-working-in-season" id="toc-frequency-of-director-working-in-season" class="nav-link" data-scroll-target="#frequency-of-director-working-in-season">Frequency of Director working in Season</a></li>
  <li><a href="#shortest-and-longest-season" id="toc-shortest-and-longest-season" class="nav-link" data-scroll-target="#shortest-and-longest-season">Shortest and Longest Season</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Insights</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="glimpse-of-episodes" class="level2">
<h2 class="anchored" data-anchor-id="glimpse-of-episodes">Glimpse of Episodes</h2>
<p>The variables in the “Episodes” Dataset include:</p>
<p>“season” which indicates the season number that the episode is in, from 1 to 11.</p>
<p>“episode_num_in_season” indicates the chronological episode number relative to the season they are in.</p>
<p>“episode_num_overall” indicates the chronological episode number relative to the entire show, from 1 to 177.</p>
<p>“title” indicates the title of the episode.</p>
<p>“directed_by” indicates the director of the episode.</p>
<p>“written_by” indicates the writer of the episode. They provide the foundation for the director to work on the episode.</p>
<p>“original_air_date” indicates the date in which the episode is released, in YEAR-MONTH-DAY format.</p>
<p>“us_viewers” indicate the number of viewers from the US that watched the episode.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 177
Columns: 8
$ season                &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
$ episode_num_in_season &lt;int&gt; 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10,…
$ episode_num_overall   &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1…
$ title                 &lt;chr&gt; "Days Gone Bye", "Guts", "Tell It to the Frogs",…
$ directed_by           &lt;chr&gt; "Frank Darabont", "Michelle MacLaren", "Gwyneth …
$ written_by            &lt;chr&gt; "Teleplay by: Frank Darabont", "Frank Darabont",…
$ original_air_date     &lt;chr&gt; "2010-10-31", "2010-11-07", "2010-11-14", "2010-…
$ us_viewers            &lt;dbl&gt; 5350000, 4710000, 5070000, 4750000, 5560000, 597…</code></pre>
</div>
</div>
</section>
<section id="comparing-viewership-over-time" class="level2">
<h2 class="anchored" data-anchor-id="comparing-viewership-over-time">Comparing Viewership Over Time</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="insights_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Changing the format of “original_air_date” variable, the episodes are grouped into the years they are released in from season 1 to 11. Since a new season is published every year for 11 years (on average), plotting the viewcount provides insight to where the show succeeded and where it dipped in audience popularity.</p>
<p>As seen from the graph, the viewcount is highest in 2014 and lowest in 2022. There is a positive linear relationship from 2010 to 2014, before gradually declining to the minimum point in 2022. This indicates that the show is popular in its early run time, and people lose interest after 2014.</p>
<section id="comparing-viewership-over-time-grouped-by-season" class="level3">
<h3 class="anchored" data-anchor-id="comparing-viewership-over-time-grouped-by-season">Comparing Viewership Over Time, grouped by Season</h3>
<p>Colour-coding the seasons in the graph better indicates which seasons won the hearts of audiences. It is evident that seasons 5 and 6 hold popularity among viewers, and more recent releases, such as season 7 onwards, its popularity wavers.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="insights_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="who-are-the-directors-and-what-is-their-impact-to-the-show" class="level2">
<h2 class="anchored" data-anchor-id="who-are-the-directors-and-what-is-their-impact-to-the-show">Who are the Directors and what is their impact to the show?</h2>
<p>Upon looking at the seasonal popularity and showing a distribution skewed to the right, it begs the question as to what causes the dip in popularity other than the time factor.</p>
<p>An episode is engaging when its cinematography and action sequences are appealing to the audience. It’s when the characters are portrayed well and fleshed out visually, alongside good visual effects and constuming for the zombies. This is determined by the episode’s director, and the walking dead engaged 55 different directors throughout its runtime.</p>
<p>Based on the table below, <strong>Greg Nicotero</strong> is a director that has the most amount of impact in determining how the show succeeds. However, his average viewcount is not the maximum value. <strong>Ernest Dickerson holds the title</strong>.</p>
<p>This means that the success of the show is not necessarily determined by who it is directed by.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 55 × 3
   directed_by           episode_count average_viewcount
   &lt;chr&gt;                         &lt;int&gt;             &lt;dbl&gt;
 1 Greg Nicotero                    37          9494324.
 2 Michael E. Satrazemis            17          9205294.
 3 David Boyd                       13          8150769.
 4 Ernest Dickerson                 10         10462000 
 5 Billy Gierhart                    6          9845000 
 6 Guy Ferland                       6          8785000 
 7 Laura Belsey                      6          2855000 
 8 Jeffrey F. January                5          9174000 
 9 Michael Cudlitz                   4          3270000 
10 Sharat Raju                       4          2232500 
# ℹ 45 more rows</code></pre>
</div>
</div>
<p>For more in-depth breakdowns of what each director does, scroll through here: <iframe height="400" width="100%" frameborder="no" src="https://starrynad.shinyapps.io/TwdDirector/"> </iframe></p>
<p>However, the impact of <strong>Greg Nicotero</strong> is significant, since he is most popular among audiences and had directed the most number of episodes. Looking at only <em>his</em> viewcount for the episodes he directed, we see that an episode in 2016 is the most popular, but this is an anomaly.</p>
<p>On average, in the earlier seasons, the range in his viewcount is wider but the viewcount in itself is still impressive. This plummets in 2015 onwards, where the viewcount depletes significantly. However, the range is smaller as the seasons go by, suggesting that he is directing episodes that are <strong>consistently</strong> doing poorly.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="insights_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="who-are-the-writers-and-what-is-their-impact" class="level2">
<h2 class="anchored" data-anchor-id="who-are-the-writers-and-what-is-their-impact">Who are the Writers and what is their impact?</h2>
<p>Then, we look at the writers involved in The Walking Dead. They hold a very important role in creating a show that is successful, as they create the narrative that will eventually be visualised by the director. They build the characters and brainstorm ideas.</p>
<p>The table below looks at the names of writers in descending order of how many episodes they write for. We see that <strong>Angela Kang</strong> and <strong>Scott M. Gimple</strong> hold the highest number of written episodes.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 69 × 3
   written_by                        episode_count average_viewcount
   &lt;chr&gt;                                     &lt;int&gt;             &lt;dbl&gt;
 1 Angela Kang                                  15         10610000 
 2 Scott M. Gimple                              13         12201538.
 3 Corey Reed                                    8          8022500 
 4 Channing Powell                               7          9961429.
 5 Matthew Negrete                               7         11538571.
 6 Matthew Negrete &amp; Channing Powell             7         10992857.
 7 David Leslie Johnson-McGoldrick               6          4340000 
 8 Seth Hoffman                                  6         12926667.
 9 Robert Kirkman                                5         11810000 
10 Vivian Tse                                    5          2652000 
# ℹ 59 more rows</code></pre>
</div>
</div>
<p>Some writers are also seen collaborating with other writers in various other episodes. For more in-depth breakdowns of what each writer does and the collaborations of the writers, scroll through here: <iframe height="400" width="100%" frameborder="no" src="https://starrynad.shinyapps.io/TwdWriter/"> </iframe></p>
<section id="looking-at-angela-and-scott-specifically" class="level4">
<h4 class="anchored" data-anchor-id="looking-at-angela-and-scott-specifically">Looking at Angela and Scott specifically:</h4>
<p><strong>Angela Kang</strong> and <strong>Scott M. Gimple</strong> are well-loved show writers. Audiences are most familiar with their work relative to other writers of the show. As seen below, Angela Kang worked on the show for a longer period of time (8 years) compared to Scott (6 years). The shape of their curves are also similar, with Angela’s viewcount consistently high between 2013-2017. Meanwhile, the distribution of viewcounts for Scott seem to be at an incline over the years, before a drastic drop in 2017.</p>
<p>For Scott, there is an abnormally range of viewcount in 2013 despite only working independently on 3 episodes that year. This means that his writing may not be consistently of good quality that year.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="insights_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="insights_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="average-imdb-score-per-season" class="level2">
<h2 class="anchored" data-anchor-id="average-imdb-score-per-season">Average IMDB score per Season</h2>
<p>Drawing on the saying: “Qualtity &gt; Quantity”, we focus now <strong>IMDB ratings</strong>. IMDB rating is an aggregated score based on votes by individuals. The show they vote on a scale from <strong>1-10</strong> indicate how good, subjectively, they perceive the show. The more people vote on the higher end of the scale, the higher the show’s IMDB rating, thereby we can assume that the show is <strong>“GOOD”</strong>.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 4
   season mean_imdb min_imdb max_imdb
    &lt;int&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
 1      1      8.53      8.1      9.2
 2      2      8.35      7.5      9.2
 3      3      8.37      7.7      9.3
 4      4      8.26      7.3      9.6
 5      5      8.36      7.4      9.6
 6      6      8.28      6.9      9.6
 7      7      7.47      5.7      9.2
 8      8      7.05      6.2      8  
 9      9      7.99      7.2      9.3
10     10      7.39      4.1      9.2
11     11      7.77      6.6      8.7</code></pre>
</div>
</div>
<p>On average <strong>Season 1</strong> has the highest IMDB rating of <strong>8.53/10</strong>. Conversely, <strong>Season 8</strong> is the worst performing season with an average IMDB rating of <strong>7.05/10</strong>.</p>
<p>However, based on the graph below, the spread of IMDB ratings for episodes in <strong>Season 10</strong> is largest, and contains very significant low ratings. Comparing Season 8 and 10, it seems that although season 10 has 3 episodes with signficantly low ratings, it does not affect the average IMDB rating because it has MORE episodes in the season.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="insights_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="other-factors-that-affect-show-popularity" class="level2">
<h2 class="anchored" data-anchor-id="other-factors-that-affect-show-popularity">Other factors that affect show popularity</h2>
<section id="frequency-of-director-working-in-season" class="level3">
<h3 class="anchored" data-anchor-id="frequency-of-director-working-in-season">Frequency of Director working in Season</h3>
<p>From the bar graoh below, director <strong>Ernest Dickerson</strong> works the most amount of times only in season 1 to 2. However, throughout the show, director <strong>Greg Nicotero</strong> worked on the most number of episodes in the show from season 2 onwards (with the exception of Season 10). This means that he is the most influential and responsible for the rise and fall of the show’s popularity and rating.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Selecting by count</code></pre>
</div>
<div class="cell-output-display">
<p><img src="insights_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="shortest-and-longest-season" class="level3">
<h3 class="anchored" data-anchor-id="shortest-and-longest-season">Shortest and Longest Season</h3>
<p>As seen below, <strong>Season 1</strong> has the smallest number of episodes in the show while <strong>Seasons 10-11</strong> have the most number of episodes.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="insights_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>